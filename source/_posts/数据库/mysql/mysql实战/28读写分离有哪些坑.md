---
title: 28读写分离有哪些坑
description: 28读写分离有哪些坑
date: 2025-03-20 21:36:24
tags: mysql
---
常见架构一主多从用于读写分离场景
两种架构
- 客户端主动负载
性能稍高，一般使用配置中心管理数据库连接信息
- 代理负载
对客户端友好不需要关注链接和后端信息维护，架构相对复杂

# 主从延迟同步问题
- 强制走主库方案
查询请求分类，必须请求新结果则强制走主库
- sleep 方案
大多数情况下主备延迟在 1 秒之内，做一个 sleep 可以有很大概率拿到最新的数据
- 判断主备无延迟方案
- 配合semi-sync方案
- 等主库位点方案
- 等GTID方案